"use strict";getSend("./php/showlist.php",function(e){for(var n=document.getElementsByClassName("imp-third")[0],t=document.getElementsByClassName("imp-attend")[0],a=document.getElementsByClassName("price_sum")[0],i=JSON.parse(e),s=0,r=0;r<i.data.length;r++){var p=document.createElement("div"),d=i.data[r].product_num*i.data[r].product_price;if(s+=d,1==i.code){p.innerHTML="<div class='imp-third'><div class='imp-infor'><i class='iconfont icon-dui imp-icon3 float_left'></i><a href='details.html' class='imp-ta1 float_left'><img src="+i.data[r].product_img+" alt=''></a><div><h3><a href='details.html' class='car_name'>"+i.data[r].product_name+"</a></h3><p><span>颜色：柠檬黄</span><span>尺码：S</span></p></div></div><div class='imp-price'><span>￥</span><strong class='car_price'>"+i.data[r].product_price+"</strong></div><div class='imp-num'><i class='num_cutNum'>-</i><span class='car_num'>"+i.data[r].product_num+"</span><i class='num_add'>+</i></div><div class='imp-total'><span>￥</span><strong class='imp-sum'>"+d+"</strong></div><ul class='imp-operate float_right'><li><a href='#' class='imp-dele'>删除</a></li><li><a href='#'>移入收藏</a></li></ul></div>",t.insertBefore(p,n),a.innerHTML=s;for(var l=document.getElementsByClassName("imp-dele"),o=(document.getElementsByClassName("imp-third"),0);o<l.length;o++)l[o].onclick=function(){var n=this.parentNode.parentNode.parentNode.parentNode,t=n.parentNode;postSend("./php/delwq.php","id=1",function(e){1==JSON.parse(e).code&&(alert("商品删除成功"),t.remove(n),location.reload(!0))})};for(var c=document.getElementsByClassName("num_add"),m=document.getElementsByClassName("num_cutNum"),u=0;u<c.length;u++)c[u].onclick=function(){postSend("./php/updatewq.php","id=1&type=add",function(e){1==JSON.parse(e).code&&alert("商品数量增加成功")});var e=this.previousSibling,n=e.innerHTML;n++,e.innerHTML=n;var t=this.parentNode.previousSibling.children[1].innerHTML,a=t*n;this.parentNode.nextElementSibling.children[1].innerHTML=a;var i=document.getElementsByClassName("price_sum")[0],s=i.innerHTML,s=parseInt(s)+parseInt(t);i.innerHTML=s},m[u].onclick=function(){postSend("./php/updatewq.php","id=1&type=cut",function(e){1==JSON.parse(e).code&&alert("商品数量减少成功")});var n,t,e,a,i,s,r=this.nextElementSibling,p=r.innerHTML;--p<=0?(n=this.parentNode.parentNode.parentNode,t=n,postSend("./php/delwq.php","id=1",function(e){1==JSON.parse(e).code&&(n.remove(t),location.reload(!0))})):(r.innerHTML=p,a=(e=this.parentNode.previousSibling.children[1].innerHTML)*p,this.parentNode.nextElementSibling.children[1].innerHTML=a,s=(i=document.getElementsByClassName("price_sum")[0]).innerHTML,s=parseInt(s)-parseInt(e),i.innerHTML=s)}}}});